import{d as w,u as k,a as C,r as S,c as x,o as M,b as l,e as P,f as m,g as e,h as r,t as a,n as g,F as B,i as N,w as R,j as L,k as n,_ as V}from"./index-B7Pz_r6u.js";import{u as j}from"./player-BuDOBLgw.js";import{p as $}from"./client-H5C7n97n.js";const F={class:"min-h-screen flex flex-col items-center justify-center p-8"},G={key:0,class:"oled-panel mb-8 w-full max-w-md"},A={class:"flex items-center justify-between"},E={class:"text-xl font-bold"},H={class:"text-right"},z={class:"text-3xl font-bold text-accent-primary"},D={class:"mt-4 progress-bar"},I={class:"text-xs text-text-muted mt-1"},T={class:"flex items-center justify-between mb-3"},U={key:0,class:"flex items-center gap-1 text-xs"},W={class:"text-text-muted"},X={class:"font-bold text-lg mb-1"},Z={class:"text-sm text-text-secondary mb-3"},q={class:"flex items-center gap-2 text-xs text-text-muted"},J={class:"flex-1 h-1 bg-oled-near rounded-full overflow-hidden"},K={key:0,class:"mt-3 pt-3 border-t border-oled-border"},O=["onClick"],Q={key:2,class:"mt-8 text-center text-sm text-accent-primary"},Y={key:3,class:"mt-8 text-center text-sm text-text-muted"},ee=w({__name:"HomeView",setup(te){const d=L(),i=j(),h=k();C({onBack:()=>{}});const s=S(null),_=x(()=>{var c;if(!((c=s.value)!=null&&c.flow))return"âœ¨";const{momentum:o,velocity:t,frustration:u}=s.value.flow;return u>.5?"ðŸŒŠ":o>.7&&t>.1?"ðŸ”¥":o>.5?"âš¡":t>0?"ðŸ“ˆ":"âœ¨"}),f=x(()=>{var t;if(!((t=s.value)!=null&&t.flow))return"";const{difficulty_target:o}=s.value.flow;switch(o){case"slightly_harder":return"Challenge Mode";case"easier":return"Building Momentum";case"easy_win":return"Confidence Boost";default:return"Flow Zone"}}),p=x(()=>s.value?Math.round(s.value.confidence*100):0);M(async()=>{await i.loadProfile();const o=await $.getRecommendations();console.log("Recommendations response:",o),o.ok&&(s.value=o.data,console.log("Recommendation set:",s.value))});function v(){var o;console.log("startRecommended called, recommendation:",s.value),(o=s.value)!=null&&o.challenge_id?(console.log("Navigating to challenge:",s.value.challenge_id),d.push(`/challenge/${s.value.challenge_id}`)):(console.log("No challenge_id, going to challenges list"),d.push("/challenges"))}function y(){d.push("/challenges")}function b(){d.push("/progress")}return(o,t)=>{var u;return n(),l("div",F,[t[6]||(t[6]=P('<div class="text-center mb-12 animate-float" data-v-51490736><h1 class="text-5xl md:text-7xl font-bold mb-4" data-v-51490736><span class="text-accent-primary" data-v-51490736>LMSP</span></h1><p class="text-xl text-text-secondary mb-2" data-v-51490736> Learn Me Some Py </p><p class="text-lg text-text-muted" data-v-51490736> The game that teaches you to build it </p></div>',1)),r(i).profile?(n(),l("div",G,[e("div",A,[e("div",null,[t[1]||(t[1]=e("div",{class:"text-sm text-text-secondary"},"Welcome back,",-1)),e("div",E,a(r(i).displayName),1)]),e("div",H,[t[2]||(t[2]=e("div",{class:"text-sm text-text-secondary"},"Level",-1)),e("div",z,a(r(i).profile.level),1)])]),e("div",D,[e("div",{class:"progress-fill",style:g({width:`${r(i).profile.xp%100}%`})},null,4)]),e("div",I,a(r(i).profile.xp)+" XP ",1)])):m("",!0),s.value?(n(),l("div",{key:1,class:"recommendation-card oled-panel-glow mb-8 w-full max-w-md cursor-pointer",onClick:v},[e("div",T,[t[3]||(t[3]=e("div",{class:"text-sm text-accent-secondary"},"Recommended for you",-1)),f.value?(n(),l("div",U,[e("span",null,a(_.value),1),e("span",W,a(f.value),1)])):m("",!0)]),e("div",X,a(s.value.concept),1),e("div",Z,a(s.value.reason),1),e("div",q,[t[4]||(t[4]=e("span",null,"Match",-1)),e("div",J,[e("div",{class:"h-full bg-accent-primary transition-all duration-500",style:g({width:`${p.value}%`})},null,4)]),e("span",null,a(p.value)+"%",1)]),(u=s.value.alternatives)!=null&&u.length?(n(),l("div",K,[t[5]||(t[5]=e("div",{class:"text-xs text-text-muted mb-2"},"Also consider:",-1)),e("div",{class:"flex flex-wrap gap-2",onClick:t[0]||(t[0]=R(()=>{},["stop"]))},[(n(!0),l(B,null,N(s.value.alternatives,c=>(n(),l("button",{key:c.id,class:"alt-chip",onClick:se=>r(d).push(`/challenge/${c.id}`)},a(c.concept),9,O))),128))])])):m("",!0)])):m("",!0),e("div",{class:"flex flex-col sm:flex-row gap-4 w-full max-w-md"},[e("button",{class:"oled-button-primary gamepad-focusable flex-1 py-4 text-lg",onClick:v}," ðŸš€ Start Learning "),e("button",{class:"oled-button-secondary gamepad-focusable flex-1 py-4 text-lg",onClick:y}," ðŸ“š Browse Challenges ")]),e("button",{class:"oled-button gamepad-focusable mt-4 w-full max-w-md py-3",onClick:b}," ðŸ“Š View Progress "),r(h).connected?(n(),l("div",Q," ðŸŽ® Gamepad detected! Use triggers for emotional feedback. ")):(n(),l("div",Y," Connect a gamepad for the full experience "))])}}}),ne=V(ee,[["__scopeId","data-v-51490736"]]);export{ne as default};
