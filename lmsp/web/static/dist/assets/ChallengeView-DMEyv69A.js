import{v as He,r as d,c as S,d as be,u as ye,x as z,o as Se,l as ke,b as i,g as t,f as m,t as u,h as a,y as ge,n as pe,z as fe,k as o,a as Pe,A as Fe,j as De,F as de,p as ae,i as xe,e as Le,q as _e,s as Be,_ as je}from"./index-B7Pz_r6u.js";import{d as ve,C as Ne,T as Ve}from"./TestResults-Dz9-xahR.js";import{a as he}from"./client-H5C7n97n.js";import{u as Ae}from"./player-BuDOBLgw.js";const Xe=He("game",()=>{const r=d(null),T=d(""),y=d("menu"),e=d([]),g=d(null),D=d(!1),E=d(!1),$=d(null),w=d(0),R=d(!1),f=d(null),C=d(1),k=d({}),_=d({}),v=d({}),h=d(null),x=d(null),M=d(0),I=d(!1),X="lmsp_timer_",J=S(()=>e.value.filter(s=>s.passed).length),G=S(()=>e.value.length),ne=S(()=>J.value===G.value&&G.value>0),le=S(()=>{if(I.value||!x.value)return M.value;const c=(Date.now()-x.value)/1e3;return M.value+c}),U="lmsp_challenge_",q="lmsp_completed_",L="lmsp_stage_";function V(s){try{return localStorage.getItem(`${U}${s}`)}catch{return null}}function oe(s,c){try{localStorage.setItem(`${U}${s}`,c)}catch{}}function ie(s){try{localStorage.removeItem(`${U}${s}`)}catch{}}function W(s){try{return localStorage.getItem(`${q}${s}`)==="true"}catch{return!1}}function Q(s){try{localStorage.setItem(`${q}${s}`,"true")}catch{}}function H(s){try{const c=localStorage.getItem(`${L}${s}`);return c?parseInt(c,10):1}catch{return 1}}function ue(s,c){try{localStorage.setItem(`${L}${s}`,c.toString())}catch{}}function F(s){try{localStorage.removeItem(`${L}${s}`)}catch{}}function Z(s){try{const c=localStorage.getItem(`${X}${s}`);return c?parseFloat(c):0}catch{return 0}}function B(s,c){try{localStorage.setItem(`${X}${s}`,c.toString())}catch{}}function P(s){try{localStorage.removeItem(`${X}${s}`)}catch{}}const O="lmsp_stage_times_";function re(s){try{const c=localStorage.getItem(`${O}${s}`);return c?JSON.parse(c):{}}catch{return{}}}function l(s,c){try{localStorage.setItem(`${O}${s}`,JSON.stringify(c))}catch{}}function n(s){if(h.value===null)return;const c=(Date.now()-h.value)/1e3;if(_.value[s]=c,r.value){const b=r.value.id,ce=v.value[s];(ce===void 0||c<ce)&&(v.value[s]=c,l(b,v.value))}}function N(){return h.value===null?0:(Date.now()-h.value)/1e3}function j(){!I.value&&x.value||(x.value=Date.now(),I.value=!1)}function A(){if(I.value||!x.value)return;const s=(Date.now()-x.value)/1e3;M.value+=s,x.value=null,I.value=!0,r.value&&B(r.value.id,M.value)}function K(){x.value=null,M.value=0,I.value=!1,r.value&&P(r.value.id)}function Y(){if(I.value||!x.value)return M.value;const s=(Date.now()-x.value)/1e3;return M.value+s}async function ee(s){D.value=!0,$.value=null;try{const c=await he.get(`/api/challenges/${s}`);r.value=c.data;const b=V(s);W(s)&&b?(R.value=!0,f.value=b,T.value=c.data.skeleton_code,M.value=0,P(s)):(R.value=!1,f.value=null,T.value=b??c.data.skeleton_code,M.value=Z(s)),x.value=Date.now(),I.value=!1,y.value="coding",e.value=[],g.value=null,w.value=0;const Ee=H(s);C.value=c.data.is_multi_stage?Ee:1,k.value={},_.value={},v.value=re(s),h.value=Date.now()}catch(c){$.value=c instanceof Error?c.message:"Failed to load challenge"}finally{D.value=!1}}async function te(){if(r.value){E.value=!0,y.value="testing",$.value=null;try{const s=Y(),c={challenge_id:r.value.id,code:T.value,player_id:"default",solve_time:s};r.value.is_multi_stage&&(c.stage=C.value);const b=await he.post("/api/code/submit",c);g.value=b.data,b.data.success&&A(),y.value="coding",b.data.is_multi_stage&&b.data.stage_complete?(n(C.value),k.value[C.value]=T.value,b.data.challenge_complete&&r.value&&(Q(r.value.id),F(r.value.id))):b.data.success&&r.value&&!b.data.is_multi_stage&&(n(1),Q(r.value.id),R.value&&(f.value=T.value)),b.data.success&&b.data.achievement_unlocked&&window.dispatchEvent(new CustomEvent("lmsp:achievement",{detail:b.data.achievement_unlocked}))}catch(s){$.value=s instanceof Error?s.message:"Submission failed",y.value="coding"}finally{E.value=!1}}}function se(){var s;(s=g.value)!=null&&s.next_stage&&(C.value=g.value.next_stage,g.value=null,r.value&&ue(r.value.id,C.value),h.value=Date.now(),x.value=Date.now(),I.value=!1)}function p(){if(!r.value||!r.value.hints)return null;w.value++;const s=Object.keys(r.value.hints).sort(),c=Math.min(w.value-1,s.length-1),b=s[c];return b?r.value.hints[b]:null}function me(){var s;return(s=r.value)!=null&&s.hints?Object.values(r.value.hints):[]}function Ce(s){T.value=s,r.value&&oe(r.value.id,s)}function Te(){r.value&&(ie(r.value.id),T.value=r.value.skeleton_code,g.value=null,w.value=0,K(),j())}function we(){if(!r.value)return!1;const s=V(r.value.id);return s!==null&&s!==r.value.skeleton_code}function $e(){var s;(s=g.value)!=null&&s.success&&(y.value="feedback")}function Re(){y.value="complete"}function Ie(){A(),r.value=null,T.value="",y.value="menu",e.value=[],g.value=null,w.value=0,x.value=null,M.value=0,I.value=!1}function Me(){if(f.value&&r.value){const s=T.value;T.value=f.value,f.value=s}}return{currentChallenge:r,code:T,phase:y,testResults:e,validationResult:g,isLoading:D,isSubmitting:E,error:$,hintsUsed:w,isReplayMode:R,previousSolution:f,timerPaused:I,currentStage:C,stageCompletedCode:k,stageTimes:_,bestStageTimes:v,testsPassingCount:J,testsTotal:G,allTestsPassing:ne,elapsedSeconds:le,loadChallenge:ee,submitCode:te,useHint:p,getAllHints:me,updateCode:Ce,resetCode:Te,hasSavedCode:we,proceedToFeedback:$e,completeChallenge:Re,returnToMenu:Ie,viewPreviousSolution:Me,startTimer:j,pauseTimer:A,resetTimer:K,getElapsedSeconds:Y,advanceToNextStage:se,getCurrentStageElapsed:N}}),Ge={class:"oled-panel-glow p-6 max-w-md mx-auto"},Ue={class:"text-xl font-bold text-center mb-6"},qe={key:0,class:"text-center text-sm text-accent-primary mb-4"},Oe={class:"mb-6"},Ke={class:"flex items-center justify-between mb-2"},Ye={class:"text-accent-primary font-mono"},ze={class:"trigger-bar"},Je={key:1,class:"text-xs text-text-muted mt-1 text-center"},We={class:"mb-6"},Qe={class:"flex items-center justify-between mb-2"},Ze={class:"text-accent-error font-mono"},et={class:"trigger-bar"},tt={key:1,class:"text-xs text-text-muted mt-1 text-center"},st={key:2,class:"text-center text-accent-primary"},at=be({__name:"EmotionalFeedback",props:{question:{},context:{},challengeId:{},stage:{}},emits:["confirm"],setup(r,{emit:T}){const y=r,e=T,g=ye(),D=Ae(),E=d(0),$=d(0),w=d(!1),R=d(0),f=d(0),C=d(!1);z(()=>g.rightTrigger,v=>{g.connected&&(R.value=v,v>.1&&(C.value=!0))}),z(()=>g.leftTrigger,v=>{g.connected&&(f.value=v,v>.1&&(C.value=!0))}),z(E,v=>{g.connected||(R.value=v,v>0&&(C.value=!0))}),z($,v=>{g.connected||(f.value=v,v>0&&(C.value=!0))});async function k(){w.value=!0;const v=await D.recordSatisfaction(R.value,f.value,y.challengeId,y.stage,C.value);e("confirm",{enjoyment:R.value,frustration:f.value,skipped:v.skipped})}let _=null;return Se(()=>{_=window.setInterval(()=>{g.connected&&g.isButtonPressed("A")&&!w.value&&k()},100)}),ke(()=>{_&&clearInterval(_)}),(v,h)=>(o(),i("div",Ge,[t("h3",Ue,u(r.question||"How was that?"),1),a(g).connected?(o(),i("div",qe," üéÆ Use triggers to express your feelings ")):m("",!0),t("div",Oe,[t("div",Ke,[h[2]||(h[2]=t("span",{class:"text-sm text-text-secondary"},"Satisfying / Fun",-1)),t("span",Ye,u(Math.round(R.value*100))+"%",1)]),t("div",ze,[t("div",{class:"trigger-fill-positive",style:pe({width:`${R.value*100}%`})},null,4)]),a(g).connected?(o(),i("div",Je," Pull RT (Right Trigger) ")):ge((o(),i("input",{key:0,type:"range","onUpdate:modelValue":h[0]||(h[0]=x=>E.value=x),min:"0",max:"1",step:"0.05",class:"w-full mt-2 accent-accent-primary"},null,512)),[[fe,E.value,void 0,{number:!0}]])]),t("div",We,[t("div",Qe,[h[3]||(h[3]=t("span",{class:"text-sm text-text-secondary"},"Frustrating / Confusing",-1)),t("span",Ze,u(Math.round(f.value*100))+"%",1)]),t("div",et,[t("div",{class:"trigger-fill-negative",style:pe({width:`${f.value*100}%`})},null,4)]),a(g).connected?(o(),i("div",tt," Pull LT (Left Trigger) ")):ge((o(),i("input",{key:0,type:"range","onUpdate:modelValue":h[1]||(h[1]=x=>$.value=x),min:"0",max:"1",step:"0.05",class:"w-full mt-2 accent-accent-error"},null,512)),[[fe,$.value,void 0,{number:!0}]])]),w.value?(o(),i("div",st," ‚úì Feedback recorded ")):(o(),i("button",{key:1,class:"oled-button-primary w-full py-3 text-lg",onClick:k},u(a(g).connected?"Press A to Confirm":"Confirm"),1))]))}}),nt={class:"max-w-6xl mx-auto px-4 py-8"},lt={key:0,class:"text-center py-12 text-text-muted"},ot={key:1,class:"text-center py-12"},it={class:"text-accent-error"},ut={key:0,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},rt={class:"lg:col-span-1"},ct={class:"oled-panel sticky top-20"},dt={class:"flex items-center gap-2 mb-2"},vt={class:"level-badge"},mt={key:0,class:"stage-badge"},gt={key:1,class:"px-2 py-0.5 text-xs font-medium bg-accent-primary/20 text-accent-primary border border-accent-primary/30 rounded"},pt={key:0,class:"timer-tooltip"},ft={class:"text-text-muted"},xt={class:"flex gap-2"},_t={class:"text-accent-success"},ht={key:0,class:"text-text-muted"},bt={class:"flex justify-between gap-4 text-xs"},yt={class:"text-accent-primary font-medium"},St={class:"flex gap-2"},kt={class:"text-text-primary font-medium"},Ct={key:0,class:"text-text-muted"},Tt={class:"flex justify-between gap-4 text-xs mt-2 pt-1 border-t border-oled-border"},wt={class:"text-text-primary"},$t={key:1,class:"timer-tooltip"},Rt={class:"flex justify-between gap-4 text-xs"},It={class:"text-accent-success"},Mt={class:"text-2xl font-bold mb-2"},Et={key:0,class:"text-lg text-accent-secondary font-medium mb-2"},Ht={class:"text-text-secondary mb-4"},Pt={key:1,class:"border-t border-oled-border pt-4 mt-4"},Ft={key:2,class:"mt-4 p-3 bg-accent-warning/10 border border-accent-warning/30 rounded-lg"},Dt={class:"flex items-center justify-between mb-1"},Lt={key:0,class:"flex items-center gap-1"},Bt=["disabled"],jt={class:"text-xs text-text-muted px-1"},Nt=["disabled"],Vt=["innerHTML"],At={class:"flex flex-col gap-2 mt-4"},Xt=["disabled"],Gt={key:3,class:"mt-4 p-3 bg-accent-success/10 border border-accent-success/30 rounded-lg"},Ut={class:"text-sm text-accent-success font-medium mb-1"},qt={key:0,class:"text-sm text-text-secondary"},Ot={key:1,class:"text-sm text-accent-primary mt-1"},Kt={key:4,class:"mt-6 pt-4 border-t border-oled-border"},Yt={class:"text-sm text-text-muted mb-2"},zt=["innerHTML"],Jt={key:5,class:"mt-6 pt-4 border-t border-oled-border"},Wt=["innerHTML"],Qt={class:"lg:col-span-2"},Zt={key:1,class:"mt-6 director-suggestion"},es={key:0,class:"intervention-card mb-4"},ts={class:"text-text-secondary text-sm"},ss={key:1,class:"suggested-lessons"},as={class:"flex items-center gap-2 mb-3"},ns={class:"text-xs text-text-muted ml-auto"},ls={class:"lessons-grid"},os=["onClick"],is={class:"flex items-center gap-2 mb-1"},us={class:"level-badge-sm"},rs={class:"font-medium text-text-primary text-sm"},cs={class:"flex items-center gap-3 text-xs text-text-muted"},ds={key:0,class:"text-accent-success"},vs={key:0,class:"text-xs text-accent-primary mt-1"},ms={key:1,class:"max-w-lg mx-auto py-12"},gs={key:0,class:"text-center mb-8"},ps={class:"text-2xl font-semibold text-accent-primary mt-2"},fs={class:"text-text-secondary mt-2"},xs={key:0,class:"text-accent-primary mt-2"},_s={key:1,class:"text-center mb-8"},hs={class:"text-text-secondary mt-2"},bs={key:2,class:"max-w-lg mx-auto py-12 text-center"},ys=be({__name:"ChallengeView",setup(r){const T=Fe(),y=De(),e=Xe(),g=ye(),D=d(0),E=d(0),$=d(!1);let w=null;function R(){D.value=e.getElapsedSeconds(),E.value=e.getCurrentStageElapsed()}function f(l){const n=Math.floor(l/3600),N=Math.floor(l%3600/60),j=Math.floor(l%60);return n>0?`${n}:${N.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`:`${N}:${j.toString().padStart(2,"0")}`}Pe({onBack:()=>y.push("/challenges")});const C=d(!1),k=d([]),_=d(0),v=d(!1),h=S(()=>k.value.length===0?null:k.value[_.value]??null);Se(async()=>{const l=T.params.id;v.value=!1,await e.loadChallenge(l),R(),w=window.setInterval(R,1e3)}),ke(()=>{w!==null&&(clearInterval(w),w=null),e.pauseTimer()}),z(()=>g.buttons,l=>{e.currentChallenge&&(l.X&&e.phase==="coding"&&e.submitCode(),l.Y&&e.phase==="coding"&&x(),l.B&&e.phase==="coding"&&y.push("/challenges"))},{deep:!0});function x(){const l=e.useHint();l&&!k.value.includes(l)&&(k.value.push(l),_.value=k.value.length-1),C.value=!0}function M(){_.value>0&&_.value--}function I(){_.value<k.value.length-1&&_.value++}function X(){e.viewPreviousSolution(),v.value=!v.value}function J(){e.submitCode()}function G(){confirm("Reset your code to the starting template? Your changes will be lost.")&&e.resetCode()}function ne(l){B.value&&!P.value&&O.value?(re(),e.phase="coding"):e.completeChallenge()}function le(){y.push("/challenges")}function U(){e.returnToMenu(),y.push("/")}const q=S(()=>e.validationResult?{success:e.validationResult.success,passing:e.validationResult.tests_passing,total:e.validationResult.tests_total,output:e.validationResult.output,error:e.validationResult.error}:null),L=S(()=>{var l;return e.validationResult?(l=e.validationResult.director_intervention)!=null&&l.suggested_lessons?e.validationResult.director_intervention.suggested_lessons:e.validationResult.suggested_lessons?e.validationResult.suggested_lessons:[]:[]}),V=S(()=>{var l;return((l=e.validationResult)==null?void 0:l.director_intervention)??null});function oe(l){y.push(`/concepts/${l}`)}const ie=S(()=>{if(e.currentChallenge)return{name:e.currentChallenge.name,description:e.currentChallenge.description_detailed||e.currentChallenge.description_brief,code:e.code}}),W=S(()=>{var l;return(l=e.currentChallenge)!=null&&l.description_detailed?ve(e.currentChallenge.description_detailed):""}),Q=S(()=>h.value?ve(h.value):""),H=S(()=>{var l;return((l=e.currentChallenge)==null?void 0:l.is_multi_stage)??!1}),ue=S(()=>{var l,n;return((n=(l=e.currentChallenge)==null?void 0:l.stages)==null?void 0:n.length)??0}),F=S(()=>{var l;return!H.value||!((l=e.currentChallenge)!=null&&l.stages)?null:e.currentChallenge.stages[e.currentStage-1]??null}),Z=S(()=>{var l;return(l=F.value)!=null&&l.description?ve(F.value.description):""}),B=S(()=>{var l;return((l=e.validationResult)==null?void 0:l.stage_complete)??!1}),P=S(()=>{var l;return((l=e.validationResult)==null?void 0:l.challenge_complete)??!1}),O=S(()=>{var l;return((l=e.validationResult)==null?void 0:l.next_stage)!==void 0});function re(){e.advanceToNextStage()}return(l,n)=>{var N,j,A,K,Y,ee,te,se;return o(),i("div",nt,[a(e).isLoading&&!a(e).currentChallenge?(o(),i("div",lt," Loading challenge... ")):a(e).error?(o(),i("div",ot,[n[5]||(n[5]=t("div",{class:"text-4xl mb-4"},"‚ùå",-1)),t("div",it,u(a(e).error),1),t("button",{class:"oled-button mt-4 gamepad-focusable",onClick:n[0]||(n[0]=p=>a(y).push("/challenges"))}," Back to Challenges ")])):a(e).currentChallenge?(o(),i(de,{key:2},[a(e).phase==="coding"||a(e).phase==="testing"?(o(),i("div",ut,[t("div",rt,[t("div",ct,[t("div",dt,[t("div",vt,"Level "+u(a(e).currentChallenge.level),1),H.value?(o(),i("div",mt," Stage "+u(a(e).currentStage)+"/"+u(ue.value),1)):m("",!0),a(e).isReplayMode?(o(),i("div",gt," üîÑ Replay Mode ")):m("",!0),t("div",{class:ae(["ml-auto timer-display relative",{"timer-paused":a(e).timerPaused}]),onMouseenter:n[1]||(n[1]=p=>$.value=!0),onMouseleave:n[2]||(n[2]=p=>$.value=!1)},[t("span",null,"‚è±Ô∏è "+u(f(H.value?E.value:D.value)),1),$.value&&H.value?(o(),i("div",pt,[n[7]||(n[7]=t("div",{class:"text-xs font-semibold text-text-secondary mb-2 border-b border-oled-border pb-1"}," Stage Times ",-1)),(o(!0),i(de,null,xe(a(e).currentStage-1,p=>(o(),i("div",{key:p,class:"flex justify-between gap-4 text-xs mb-1"},[t("span",ft,"Stage "+u(p)+":",1),t("div",xt,[t("span",_t,u(f(a(e).stageTimes[p]||0)),1),a(e).bestStageTimes[p]?(o(),i("span",ht," (best: "+u(f(a(e).bestStageTimes[p]))+") ",1)):m("",!0)])]))),128)),t("div",bt,[t("span",yt,"Stage "+u(a(e).currentStage)+":",1),t("div",St,[t("span",kt,u(f(E.value)),1),a(e).bestStageTimes[a(e).currentStage]?(o(),i("span",Ct," (best: "+u(f(a(e).bestStageTimes[a(e).currentStage]))+") ",1)):m("",!0)])]),t("div",Tt,[n[6]||(n[6]=t("span",{class:"text-text-secondary"},"Total:",-1)),t("span",wt,u(f(D.value)),1)])])):$.value&&!H.value&&a(e).bestStageTimes[1]?(o(),i("div",$t,[t("div",Rt,[n[8]||(n[8]=t("span",{class:"text-text-muted"},"Best time:",-1)),t("span",It,u(f(a(e).bestStageTimes[1])),1)])])):m("",!0)],34)]),t("h1",Mt,u(a(e).currentChallenge.name),1),H.value&&F.value?(o(),i("div",Et,u(F.value.name),1)):m("",!0),t("p",Ht,u(H.value&&F.value?(N=F.value.description)==null?void 0:N.split(`
`)[0]:a(e).currentChallenge.description_brief),1),a(g).connected?(o(),i("div",Pt,[...n[9]||(n[9]=[Le('<div class="text-sm text-text-muted mb-2" data-v-e1801c3b>Controls</div><div class="grid grid-cols-2 gap-2 text-sm" data-v-e1801c3b><div data-v-e1801c3b><span class="gamepad-button" data-v-e1801c3b>X</span> Run Tests</div><div data-v-e1801c3b><span class="gamepad-button" data-v-e1801c3b>Y</span> Hint</div><div data-v-e1801c3b><span class="gamepad-button" data-v-e1801c3b>B</span> Back</div></div>',2)])])):m("",!0),C.value&&h.value?(o(),i("div",Ft,[t("div",Dt,[n[10]||(n[10]=t("div",{class:"text-sm text-accent-warning font-medium"},"üí° Hint",-1)),k.value.length>1?(o(),i("div",Lt,[t("button",{class:ae(["hint-nav-btn",{"opacity-30 cursor-default":_.value===0}]),disabled:_.value===0,onClick:M},"‚Äπ",10,Bt),t("span",jt,u(_.value+1)+"/"+u(k.value.length),1),t("button",{class:ae(["hint-nav-btn",{"opacity-30 cursor-default":_.value===k.value.length-1}]),disabled:_.value===k.value.length-1,onClick:I},"‚Ä∫",10,Nt)])):m("",!0)]),t("div",{class:"prose prose-invert prose-sm hint-content",innerHTML:Q.value},null,8,Vt)])):m("",!0),t("div",At,[B.value&&O.value&&!P.value?(o(),i("button",{key:0,class:"oled-button-success gamepad-focusable animate-pulse",onClick:n[3]||(n[3]=(...p)=>a(e).proceedToFeedback&&a(e).proceedToFeedback(...p))}," ‚úÖ Continue to Stage "+u((j=a(e).validationResult)==null?void 0:j.next_stage),1)):(A=a(e).validationResult)!=null&&A.success&&(!H.value||P.value)?(o(),i("button",{key:1,class:"oled-button-success gamepad-focusable",onClick:n[4]||(n[4]=(...p)=>a(e).proceedToFeedback&&a(e).proceedToFeedback(...p))}," ‚úÖ Submit Solution ")):m("",!0),t("button",{class:"oled-button-primary gamepad-focusable",disabled:a(e).isSubmitting,onClick:J},u(a(e).isSubmitting?"‚è≥ Running...":"‚ñ∂ Run Tests"),9,Xt),t("button",{class:"oled-button gamepad-focusable",onClick:x}," üí° Need a hint? "),a(e).isReplayMode?(o(),i("button",{key:2,class:ae(["oled-button gamepad-focusable",{"border-accent-primary text-accent-primary":v.value}]),onClick:X},u(v.value?"üìù Back to Current Work":"üëÄ View Previous Solution"),3)):m("",!0),a(e).hasSavedCode()?(o(),i("button",{key:3,class:"oled-button text-accent-warning gamepad-focusable",onClick:G}," üîÑ Reset to Start ")):m("",!0)]),B.value&&!P.value?(o(),i("div",Gt,[t("div",Ut,"üèîÔ∏è Keep pushing! Stage "+u(a(e).currentStage)+" complete!",1),(K=a(e).validationResult)!=null&&K.next_stage_info?(o(),i("div",qt," Next: "+u(a(e).validationResult.next_stage_info.name),1)):m("",!0),(Y=a(e).validationResult)!=null&&Y.xp_earned?(o(),i("div",Ot," +"+u(a(e).validationResult.xp_earned)+" XP ",1)):m("",!0)])):m("",!0),H.value&&Z.value?(o(),i("div",Kt,[t("div",Yt,"Stage "+u(a(e).currentStage)+" Instructions",1),t("div",{class:"prose prose-invert prose-sm",innerHTML:Z.value},null,8,zt)])):W.value?(o(),i("div",Jt,[n[11]||(n[11]=t("div",{class:"text-sm text-text-muted mb-2"},"Instructions",-1)),t("div",{class:"prose prose-invert prose-sm",innerHTML:W.value},null,8,Wt)])):m("",!0)])]),t("div",Qt,[_e(Ne,{code:a(e).code,readonly:a(e).phase==="testing","onUpdate:code":a(e).updateCode},null,8,["code","readonly","onUpdate:code"]),q.value?(o(),Be(Ve,{key:0,results:q.value,challenge:ie.value,class:"mt-6"},null,8,["results","challenge"])):m("",!0),V.value||L.value.length>0?(o(),i("div",Zt,[V.value?(o(),i("div",es,[n[12]||(n[12]=t("div",{class:"flex items-center gap-2 mb-2"},[t("span",{class:"text-lg"},"üéØ"),t("span",{class:"font-medium text-accent-primary"},"Director's Guidance")],-1)),t("p",ts,u(V.value.content),1)])):m("",!0),L.value.length>0?(o(),i("div",ss,[t("div",as,[n[13]||(n[13]=t("span",{class:"text-lg"},"üìö",-1)),n[14]||(n[14]=t("span",{class:"font-medium text-text-primary"},"Review These Concepts",-1)),t("span",ns,u(L.value.length)+" lesson"+u(L.value.length>1?"s":""),1)]),t("div",ls,[(o(!0),i(de,null,xe(L.value,p=>(o(),i("button",{key:p.id,class:"lesson-card gamepad-focusable",onClick:me=>oe(p.id)},[t("div",is,[t("span",us,"L"+u(p.level),1),t("span",rs,u(p.name),1)]),t("div",cs,[t("span",null,u(p.category),1),t("span",null,"~"+u(Math.ceil(p.time_to_read/60))+" min",1),p.has_try_it?(o(),i("span",ds,"‚úì Interactive")):m("",!0)]),p.depth===0?(o(),i("div",vs," ‚Üê This concept ")):m("",!0)],8,os))),128))])])):m("",!0)])):m("",!0)])])):a(e).phase==="feedback"?(o(),i("div",ms,[B.value&&!P.value?(o(),i("div",gs,[n[15]||(n[15]=t("div",{class:"text-6xl mb-4"},"üèîÔ∏è",-1)),n[16]||(n[16]=t("h1",{class:"text-3xl font-bold text-accent-secondary"},"Keep pushing!",-1)),t("h2",ps,"Stage "+u(a(e).currentStage)+" Complete!",1),t("p",fs,u((ee=F.value)==null?void 0:ee.name),1),(te=a(e).validationResult)!=null&&te.xp_earned?(o(),i("div",xs," +"+u(a(e).validationResult.xp_earned)+" XP ",1)):m("",!0)])):(o(),i("div",_s,[n[17]||(n[17]=t("div",{class:"text-6xl mb-4"},"üéâ",-1)),n[18]||(n[18]=t("h1",{class:"text-3xl font-bold text-accent-primary"},"Challenge Complete!",-1)),t("p",hs,u(a(e).currentChallenge.name),1)])),_e(at,{question:B.value&&!P.value?`How did Stage ${a(e).currentStage}: '${(se=F.value)==null?void 0:se.name}' feel?`:`How did '${a(e).currentChallenge.name}' feel?`,context:B.value&&!P.value?`${a(e).currentChallenge.id}_stage${a(e).currentStage}`:a(e).currentChallenge.id,"challenge-id":a(e).currentChallenge.id,stage:B.value&&!P.value?a(e).currentStage:void 0,onConfirm:ne},null,8,["question","context","challenge-id","stage"])])):a(e).phase==="complete"?(o(),i("div",bs,[n[19]||(n[19]=t("div",{class:"text-6xl mb-4"},"‚ú®",-1)),n[20]||(n[20]=t("h1",{class:"text-3xl font-bold mb-4"},"Great Job!",-1)),n[21]||(n[21]=t("p",{class:"text-text-secondary mb-8"}," You've completed this challenge. What's next? ",-1)),t("div",{class:"flex flex-col gap-4"},[t("button",{class:"oled-button-primary py-4 text-lg gamepad-focusable",onClick:le}," üöÄ Next Challenge "),t("button",{class:"oled-button py-3 gamepad-focusable",onClick:U}," üè† Return to Menu ")])])):m("",!0)],64)):m("",!0)])}}}),ws=je(ys,[["__scopeId","data-v-e1801c3b"]]);export{ws as default};
