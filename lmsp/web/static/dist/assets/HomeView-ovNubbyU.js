import{d as w,u as k,a as C,r as S,c as f,o as M,b as a,e as P,f as m,g as e,h as r,t as l,n as g,F as $,i as B,w as N,j as R,k as n,_ as L}from"./index-C9SLr4DQ.js";import{u as V}from"./player-CVYXLnpi.js";import{p as j}from"./client-H5C7n97n.js";const F={class:"min-h-screen flex flex-col items-center justify-center p-8"},G={key:0,class:"oled-panel mb-8 w-full max-w-md"},A={class:"flex items-center justify-between"},E={class:"text-xl font-bold"},H={class:"text-right"},I={class:"text-3xl font-bold text-accent-primary"},T={class:"mt-4 progress-bar"},z={class:"text-xs text-text-muted mt-1"},D={class:"flex items-center justify-between mb-3"},U={key:0,class:"flex items-center gap-1 text-xs"},W={class:"text-text-muted"},X={class:"font-bold text-lg mb-1"},Z={class:"text-sm text-text-secondary mb-3"},q={class:"flex items-center gap-2 text-xs text-text-muted"},J={class:"flex-1 h-1 bg-oled-near rounded-full overflow-hidden"},K={key:0,class:"mt-3 pt-3 border-t border-oled-border"},O=["onClick"],Q={key:2,class:"mt-8 text-center text-sm text-accent-primary"},Y={key:3,class:"mt-8 text-center text-sm text-text-muted"},ee=w({__name:"HomeView",setup(te){const d=R(),u=V(),h=k();C({onBack:()=>{}});const s=S(null),y=f(()=>{var c;if(!((c=s.value)!=null&&c.flow))return"âœ¨";const{momentum:o,velocity:t,frustration:i}=s.value.flow;return i>.5?"ðŸŒŠ":o>.7&&t>.1?"ðŸ”¥":o>.5?"âš¡":t>0?"ðŸ“ˆ":"âœ¨"}),p=f(()=>{var t;if(!((t=s.value)!=null&&t.flow))return"";const{difficulty_target:o}=s.value.flow;switch(o){case"slightly_harder":return"Challenge Mode";case"easier":return"Building Momentum";case"easy_win":return"Confidence Boost";default:return"Flow Zone"}}),x=f(()=>s.value?Math.round(s.value.confidence*100):0);M(async()=>{await u.loadProfile();const o=await j.getRecommendations();console.log("Recommendations response:",o),o.ok&&(s.value=o.data,console.log("Recommendation set:",s.value))});function v(){var o;if(console.log("startRecommended called, recommendation:",s.value),(o=s.value)!=null&&o.item_id){const t=s.value.type||s.value.action||"challenge",i=s.value.item_id;console.log(`Navigating to ${t}:`,i),t==="concept"?d.push(`/concept/${i}`):d.push(`/challenge/${i}`)}else console.log("No item_id, going to challenges list"),d.push("/challenges")}function _(){d.push("/challenges")}function b(){d.push("/progress")}return(o,t)=>{var i;return n(),a("div",F,[t[6]||(t[6]=P('<div class="text-center mb-12 animate-float" data-v-c77afa1f><h1 class="text-5xl md:text-7xl font-bold mb-4" data-v-c77afa1f><span class="text-accent-primary" data-v-c77afa1f>LMSP</span></h1><p class="text-xl text-text-secondary mb-2" data-v-c77afa1f> Learn Me Some Py </p><p class="text-lg text-text-muted" data-v-c77afa1f> The game that teaches you to build it </p></div>',1)),r(u).profile?(n(),a("div",G,[e("div",A,[e("div",null,[t[1]||(t[1]=e("div",{class:"text-sm text-text-secondary"},"Welcome back,",-1)),e("div",E,l(r(u).displayName),1)]),e("div",H,[t[2]||(t[2]=e("div",{class:"text-sm text-text-secondary"},"Level",-1)),e("div",I,l(r(u).profile.level),1)])]),e("div",T,[e("div",{class:"progress-fill",style:g({width:`${r(u).profile.xp%100}%`})},null,4)]),e("div",z,l(r(u).profile.xp)+" XP ",1)])):m("",!0),s.value?(n(),a("div",{key:1,class:"recommendation-card oled-panel-glow mb-8 w-full max-w-md cursor-pointer",onClick:v},[e("div",D,[t[3]||(t[3]=e("div",{class:"text-sm text-accent-secondary"},"Recommended for you",-1)),p.value?(n(),a("div",U,[e("span",null,l(y.value),1),e("span",W,l(p.value),1)])):m("",!0)]),e("div",X,l(s.value.concept),1),e("div",Z,l(s.value.reason),1),e("div",q,[t[4]||(t[4]=e("span",null,"Match",-1)),e("div",J,[e("div",{class:"h-full bg-accent-primary transition-all duration-500",style:g({width:`${x.value}%`})},null,4)]),e("span",null,l(x.value)+"%",1)]),(i=s.value.alternatives)!=null&&i.length?(n(),a("div",K,[t[5]||(t[5]=e("div",{class:"text-xs text-text-muted mb-2"},"Also consider:",-1)),e("div",{class:"flex flex-wrap gap-2",onClick:t[0]||(t[0]=N(()=>{},["stop"]))},[(n(!0),a($,null,B(s.value.alternatives,c=>(n(),a("button",{key:c.id,class:"alt-chip",onClick:se=>r(d).push(`/${c.type||"challenge"}/${c.id}`)},l(c.concept),9,O))),128))])])):m("",!0)])):m("",!0),e("div",{class:"flex flex-col sm:flex-row gap-4 w-full max-w-md"},[e("button",{class:"oled-button-primary gamepad-focusable flex-1 py-4 text-lg",onClick:v}," ðŸš€ Start Learning "),e("button",{class:"oled-button-secondary gamepad-focusable flex-1 py-4 text-lg",onClick:_}," ðŸ“š Browse Challenges ")]),e("button",{class:"oled-button gamepad-focusable mt-4 w-full max-w-md py-3",onClick:b}," ðŸ“Š View Progress "),r(h).connected?(n(),a("div",Q," ðŸŽ® Gamepad detected! Use triggers for emotional feedback. ")):(n(),a("div",Y," Connect a gamepad for the full experience "))])}}}),ne=L(ee,[["__scopeId","data-v-c77afa1f"]]);export{ne as default};
