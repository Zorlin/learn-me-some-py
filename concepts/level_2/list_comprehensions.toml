# Level 2: List Comprehensions

[concept]
id = "list_comprehensions"
name = "List Comprehensions: One-Line Loops"
level = 2
category = "pythonic"
order = 13

[content]
lesson = """
## Compact List Creation

List comprehensions create new lists from existing ones in one line:

```python
# Traditional way
squares = []
for x in range(5):
    squares.append(x ** 2)

# List comprehension way
squares = [x ** 2 for x in range(5)]
# Result: [0, 1, 4, 9, 16]
```

## The Pattern

```
[expression for item in iterable]
```

```python
# Double every number
numbers = [1, 2, 3, 4, 5]
doubled = [x * 2 for x in numbers]
# [2, 4, 6, 8, 10]

# Get lengths
words = ["cat", "elephant", "dog"]
lengths = [len(w) for w in words]
# [3, 8, 3]
```

## With Filtering

Add `if` to filter items:

```python
# Only even numbers
evens = [x for x in range(10) if x % 2 == 0]
# [0, 2, 4, 6, 8]

# Only long words
words = ["cat", "elephant", "dog", "hippopotamus"]
long = [w for w in words if len(w) > 5]
# ["elephant", "hippopotamus"]
```

## Transform AND Filter

```python
# Square only positive numbers
numbers = [-2, -1, 0, 1, 2, 3]
positive_squares = [x**2 for x in numbers if x > 0]
# [1, 4, 9]
```

## Practical Examples

```python
# Extract names from dictionaries
enemies = [
    {"name": "goblin", "hp": 30},
    {"name": "orc", "hp": 50}
]
names = [e["name"] for e in enemies]
# ["goblin", "orc"]

# Filter alive enemies
alive = [e for e in enemies if e["hp"] > 0]

# Clean up user input
raw = ["  Hello ", "WORLD  ", "  python  "]
clean = [s.strip().lower() for s in raw]
# ["hello", "world", "python"]
```

## When NOT to Use

If it gets complex, use a regular loop:

```python
# Too complex - hard to read!
result = [x*2 if x > 0 else x/2 for x in nums if x != 0 and x < 100]

# Better as a regular loop
result = []
for x in nums:
    if x != 0 and x < 100:
        if x > 0:
            result.append(x * 2)
        else:
            result.append(x / 2)
```

## Don't Use for Side Effects

```python
# BAD - don't do this
[print(x) for x in items]

# GOOD - use a regular loop
for x in items:
    print(x)
```
"""

[content.try_it]
prompt = "Create a list of squares for numbers 1-5"
starter = '''
# Use a list comprehension to create [1, 4, 9, 16, 25]

'''
solution = '''
# Use a list comprehension to create [1, 4, 9, 16, 25]
squares = [x**2 for x in range(1, 6)]
print(squares)
'''

[connections]
prerequisites = ["for_loops", "lists", "if_elif_else"]
enables = ["comprehensions"]
used_in = []
see_also = ["for_loops"]

[meta]
time_to_read = 55
difficulty = "intermediate"
tags = ["pythonic", "comprehensions", "lists"]
