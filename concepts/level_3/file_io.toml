# Level 3: File I/O

[concept]
id = "file_io"
name = "File I/O: Read and Write Files"
level = 3
category = "io"
order = 6

[content]
lesson = """
## Reading and Writing Files

File I/O lets you save and load data:

```python
# Write to file
with open('save.txt', 'w') as f:
    f.write('Player HP: 100\\n')

# Read from file
with open('save.txt', 'r') as f:
    content = f.read()
    print(content)
```

## The with Statement

`with` automatically closes the file when done:

```python
# Good - auto-closes
with open('file.txt', 'r') as f:
    data = f.read()
# File is closed here

# Bad - might not close
f = open('file.txt', 'r')
data = f.read()
f.close()  # Easy to forget!
```

## File Modes

| Mode | Meaning |
|------|---------|
| `'r'` | Read (file must exist) |
| `'w'` | Write (creates new or overwrites!) |
| `'a'` | Append (adds to end) |
| `'x'` | Create (fails if exists) |

## Reading Methods

```python
with open('file.txt', 'r') as f:
    # Read entire file as string
    content = f.read()

    # Read all lines as list
    lines = f.readlines()

    # Read line by line
    for line in f:
        print(line)
```

## JSON for Structured Data

```python
import json

# Save
data = {"name": "Hero", "hp": 100}
with open('save.json', 'w') as f:
    json.dump(data, f)

# Load
with open('save.json', 'r') as f:
    loaded = json.load(f)
    print(loaded["name"])  # "Hero"
```

## Common Mistake

```python
# WRONG: 'w' mode destroys existing file!
with open('important.txt', 'w') as f:
    f.write('Oops!')  # Old data is GONE

# Use 'a' to append instead
with open('log.txt', 'a') as f:
    f.write('New entry\\n')
```
"""

[content.try_it]
prompt = "Save and load a player's score using JSON"
starter = '''
import json

def save_score(score):
    # Save score to 'score.json'
    pass

def load_score():
    # Load and return score from 'score.json'
    # Return 0 if file doesn't exist
    pass

'''
solution = '''
import json

def save_score(score):
    with open('score.json', 'w') as f:
        json.dump({"score": score}, f)

def load_score():
    try:
        with open('score.json', 'r') as f:
            data = json.load(f)
            return data["score"]
    except FileNotFoundError:
        return 0
'''

[connections]
prerequisites = ["strings", "for_loops"]
enables = []
used_in = []
see_also = ["exceptions"]

[meta]
time_to_read = 55
difficulty = "intermediate"
tags = ["files", "io", "json"]
