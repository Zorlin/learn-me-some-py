# Level 3: Exceptions

[concept]
id = "exceptions"
name = "Exceptions: Handle Errors"
level = 3
category = "error_handling"
order = 5

[content]
lesson = """
## Catching Errors

Exceptions let you handle errors gracefully:

```python
try:
    damage = 100 / armor_rating
except ZeroDivisionError:
    damage = 100  # No armor? Full damage!
    print("Warning: No armor equipped!")
```

## The try/except Pattern

```python
try:
    # Risky code that might fail
    result = risky_operation()
except SomeError:
    # What to do if it fails
    handle_error()
```

## Common Exceptions

| Exception | When it happens |
|-----------|-----------------|
| `ValueError` | Invalid value: `int("hello")` |
| `KeyError` | Missing dict key: `data["missing"]` |
| `IndexError` | List index out of range |
| `FileNotFoundError` | File doesn't exist |
| `ZeroDivisionError` | Division by zero |
| `TypeError` | Wrong type: `"hello" + 5` |

## Multiple except Blocks

```python
try:
    data = load_save_file()
except FileNotFoundError:
    print("No save file found")
    data = create_new_save()
except json.JSONDecodeError:
    print("Save file corrupted")
    data = create_new_save()
```

## The finally Block

`finally` ALWAYS runs, even if there's an error:

```python
try:
    file = open("data.txt")
    process(file)
finally:
    file.close()  # Always closes!
```

## Raising Exceptions

```python
def set_hp(value):
    if value < 0:
        raise ValueError("HP cannot be negative")
    self.hp = value
```
"""

[content.try_it]
prompt = "Handle a potential division by zero error"
starter = '''
def safe_divide(a, b):
    # Return a / b, but handle division by zero
    pass

print(safe_divide(10, 2))  # Should print 5.0
print(safe_divide(10, 0))  # Should print "Cannot divide by zero" and return None

'''
solution = '''
def safe_divide(a, b):
    try:
        return a / b
    except ZeroDivisionError:
        print("Cannot divide by zero")
        return None

print(safe_divide(10, 2))  # 5.0
print(safe_divide(10, 0))  # Cannot divide by zero, None
'''

[connections]
prerequisites = ["functions", "if_elif_else"]
enables = ["context_managers"]
used_in = []
see_also = ["file_io"]

[meta]
time_to_read = 55
difficulty = "intermediate"
tags = ["error_handling", "exceptions", "try_except"]
