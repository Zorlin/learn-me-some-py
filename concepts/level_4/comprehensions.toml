# Level 4: Comprehensions

[concept]
id = "comprehensions"
name = "Comprehensions: Build Collections"
level = 4
category = "pythonic"
order = 1

[content]
lesson = """
## One Line to Build Them All

Comprehensions create lists, dicts, and sets in one elegant line.

**Old way (loop):**
```python
numbers = []
for i in range(5):
    numbers.append(i * 2)
# [0, 2, 4, 6, 8]
```

**New way (comprehension):**
```python
numbers = [i * 2 for i in range(5)]
# [0, 2, 4, 6, 8]
```

Same result, less code, more Pythonic!

## The Pattern

```python
[what_to_collect for item in source if condition]
```

## List Comprehension

```python
# Basic
squares = [x * x for x in range(5)]
# [0, 1, 4, 9, 16]

# With filter
evens = [x for x in range(10) if x % 2 == 0]
# [0, 2, 4, 6, 8]

# Get all weapons from inventory
weapons = [item["name"] for item in items if item["type"] == "weapon"]
```

## Dict Comprehension

```python
# Create lookup table
squares_dict = {x: x * x for x in range(5)}
# {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}

# From two lists
names = ["Alice", "Bob", "Charlie"]
scores = [85, 92, 78]
grade_book = {name: score for name, score in zip(names, scores)}
# {"Alice": 85, "Bob": 92, "Charlie": 78}
```

## Set Comprehension

```python
# Unique values only
numbers = [1, 2, 2, 3, 3, 3]
unique_squares = {x * x for x in numbers}
# {1, 4, 9}
```

## When NOT to Use

Keep it simple! If your comprehension is hard to read, use a loop:

```python
# TOO COMPLEX - use a loop instead
result = [x * y for x in range(10) if x % 2 == 0
          for y in range(10) if y % 3 == 0 if x + y < 10]
```
"""

[content.try_it]
prompt = "Create a dict comprehension mapping names to their lengths"
starter = '''
names = ["Alice", "Bob", "Charlie", "Diana"]

# Create dict: {"Alice": 5, "Bob": 3, ...}

'''
solution = '''
names = ["Alice", "Bob", "Charlie", "Diana"]

name_lengths = {name: len(name) for name in names}
print(name_lengths)  # {"Alice": 5, "Bob": 3, "Charlie": 7, "Diana": 5}
'''

[connections]
prerequisites = ["lists", "for_loops", "dictionaries"]
enables = ["generators"]
used_in = []
see_also = ["list_comprehensions"]

[meta]
time_to_read = 55
difficulty = "intermediate"
tags = ["comprehensions", "pythonic", "collections"]
