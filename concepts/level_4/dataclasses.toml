# Level 4: Dataclasses

[concept]
id = "dataclasses"
name = "Dataclasses: Less Boilerplate"
level = 4
category = "oop"
order = 4

[content]
lesson = """
## Auto-Generate Class Boilerplate

Dataclasses automatically create `__init__`, `__repr__`, and `__eq__`:

```python
from dataclasses import dataclass

@dataclass
class Player:
    name: str
    hp: int
    level: int = 1

player = Player("Hero", 100)
print(player)  # Player(name='Hero', hp=100, level=1)
```

## What You Get for Free

```python
# Without dataclass - lots of typing!
class Item:
    def __init__(self, name, value, rarity="common"):
        self.name = name
        self.value = value
        self.rarity = rarity

    def __repr__(self):
        return f"Item(name={self.name!r}, value={self.value!r}, rarity={self.rarity!r})"

    def __eq__(self, other):
        return self.name == other.name and self.value == other.value

# With dataclass - one decorator!
@dataclass
class Item:
    name: str
    value: int
    rarity: str = "common"
```

## Add Methods Too

```python
@dataclass
class Inventory:
    items: list = field(default_factory=list)
    max_size: int = 10

    def add_item(self, item: str) -> bool:
        if len(self.items) < self.max_size:
            self.items.append(item)
            return True
        return False
```

## Default Factory for Lists

Never use mutable defaults directly!

```python
from dataclasses import dataclass, field

# WRONG - shared between instances!
@dataclass
class Broken:
    items: list = []  # DON'T DO THIS!

# RIGHT - each instance gets its own list
@dataclass
class Works:
    items: list = field(default_factory=list)
```

## Frozen (Immutable) Dataclasses

```python
@dataclass(frozen=True)
class Point:
    x: int
    y: int

p = Point(1, 2)
# p.x = 3  # Error! Frozen dataclass
```

## Post-Init Processing

```python
@dataclass
class Enemy:
    level: int
    base_hp: int = 50

    def __post_init__(self):
        # Called after __init__
        self.hp = self.base_hp * self.level
        self.max_hp = self.hp

enemy = Enemy(level=5)
print(enemy.hp)  # 250
```
"""

[content.try_it]
prompt = "Create a dataclass for a game Character with name, hp, and inventory"
starter = '''
from dataclasses import dataclass, field

# Create Character dataclass with:
# - name: str
# - hp: int
# - inventory: list (default empty)

'''
solution = '''
from dataclasses import dataclass, field

@dataclass
class Character:
    name: str
    hp: int
    inventory: list = field(default_factory=list)

hero = Character("Hero", 100)
hero.inventory.append("Sword")
print(hero)  # Character(name='Hero', hp=100, inventory=['Sword'])
'''

[connections]
prerequisites = ["classes", "decorators", "type_hints"]
enables = []
used_in = []
see_also = ["classes"]

[meta]
time_to_read = 55
difficulty = "intermediate"
tags = ["dataclasses", "oop", "boilerplate"]
